# React 同构

### 一、压力测试工具 autocannon 

```bash
autocannon -c 60 -d 100 // 每秒钟 60 的并发，并持续 100 秒：
```

每秒 60 的并发请求量时，QPS 平均有 266 左右，不过还有 23 个请求超时了，响应时间还可以，99%的请求在 1817ms 毫秒内完成。

### 二、 node-heapdump 内存分析工具

1. axios 超时设置超时，

 Nodejs 中，io 的链接会阻塞 timer 处理，因此这个 setTimeout 并不会按时触发，也就有了 10s 以上才返回的情况。

貌似问题解决了，巨大的流量和阻塞的 connection 导致请求堆积，服务器处理不过来，CPU 也就下不来

2. 后端接口优化 合并发请求设置，redis缓存接口等

3. 控制首屏渲染dom的数量，把握首屏看到的东西、骨架屏组合、服务端请求数量。
4. 静态化页面
5. 组件缓存 ssr-cache

